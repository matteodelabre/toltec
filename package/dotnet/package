#!/usr/bin/env bash
# Copyright (c) 2020 The Toltec Contributors
# SPDX-License-Identifier: MIT

pkgnames=(dotnet-sdk)
pkgdesc="Core functionality needed to create .NET Core projects, that is shared between Visual Studio and CLI "
url=https://github.com/dotnet
pkgver=3.1.404-1
timestamp=2020-12-27T18:48Z
section=utils
maintainer="Eeems <eeems@eeems.email>"
license=MIT

source=(https://download.visualstudio.microsoft.com/download/pr/2ebe1f4b-4423-4694-8f5b-57f22a315d66/4bceeffda88fc6f19fad7dfb2cd30487/dotnet-sdk-3.1.404-linux-arm.tar.gz)
sha256sums=(c95e8cf72abbcde1ac3974158ed9355d8d5588bade463fdf69d6932f915f453a)
noextract=(dotnet-sdk-3.1.404-linux-arm.tar.gz)

prepare() {
    mkdir -p "$srcdir"/dotnet
    tar -xf "$srcdir"/dotnet-sdk-3.1.404-linux-arm.tar.gz -C "$srcdir"/dotnet
}

package() {
    install -d "$pkgdir"/opt/dotnet
    cp -R "$srcdir"/dotnet/* "$pkgdir"/opt/dotnet/
    mkdir -p "$pkgdir"/opt/bin
    cd "$pkgdir"/opt/bin
    ln -s ../dotnet/dotnet dotnet
    chmod +x dotnet
}
